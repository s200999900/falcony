# Description: BitTorrent client & chroot network daemon with WWW and Telnet interface written in Perl
# URL: http://bitflu.workaround.ch/
# Packager: Falcony, falcony at users dot sourceforge dot net
# Depends on: p5-Digest-SHA1, p5-URI, perl-5.8

name=bitflu
version=0.33
release=1
source=(http://bitflu.workaround.ch/bitflu/$name-$version.tgz \  
        README bitflu.sh bitflu.config )

build() {
        cd $name
        mkdir $PKG/usr
        mkdir $PKG/usr/sbin
        mkdir $PKG/usr/share
        mkdir $PKG/usr/share/bitflu
        mkdir $PKG/usr/share/bitflu/{dev,etc,lib,autoload,workdir,publish}
        mknod -m 666 $PKG/usr/share/bitflu/dev/zero c 1 5
        cp /etc/protocols $PKG/usr/share/bitflu/etc
        cp /etc/resolv.conf $PKG/usr/share/bitflu/etc 
        cp /lib/libnss* $PKG/usr/share/bitflu/lib
        cp /lib/libresolv.so.2 $PKG/usr/share/bitflu/lib
        install -m 755 bitflu.pl $PKG/usr/share/bitflu
        install -m 755 $SRC/bitflu.sh $PKG/usr/sbin/bitflu
        install -m 644 $SRC/README $PKG/usr/share/bitflu/
        install -m 664 $SRC/bitflu.config $PKG/usr/share/bitflu/
        chown -R root:users $PKG/usr/share/bitflu
        chown root:root $PKG/usr/share/bitflu/dev/zero

}
#
